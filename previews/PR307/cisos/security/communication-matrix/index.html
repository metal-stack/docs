<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Communication Matrix · metal-stack</title><meta name="title" content="Communication Matrix · metal-stack"/><meta property="og:title" content="Communication Matrix · metal-stack"/><meta property="twitter:title" content="Communication Matrix · metal-stack"/><meta name="description" content="Documentation for metal-stack."/><meta property="og:description" content="Documentation for metal-stack."/><meta property="twitter:description" content="Documentation for metal-stack."/><meta property="og:url" content="https://docs.metal-stack.io/cisos/security/communication-matrix/"/><meta property="twitter:url" content="https://docs.metal-stack.io/cisos/security/communication-matrix/"/><link rel="canonical" href="https://docs.metal-stack.io/cisos/security/communication-matrix/"/><script data-outdated-warner src="../../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../../assets/documenter.js"></script><script src="../../../search_index.js"></script><script src="../../../siteinfo.js"></script><script src="../../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../../assets/themeswap.js"></script><link href="../../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../../assets/youtube.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../../"><img src="../../../assets/logo.svg" alt="metal-stack logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../../">metal-stack</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../../">Home</a></li><li><span class="tocitem">General</span><ul><li><a class="tocitem" href="../../../getting-started/">Getting Started</a></li><li><a class="tocitem" href="../../../concepts/why-metal-stack/">Why metal-stack</a></li><li><a class="tocitem" href="../../../concepts/why-bare-metal/">Why Bare Metal</a></li><li><a class="tocitem" href="../../../general/flavors-of-metal-stack/">Flavors of metal-stack</a></li></ul></li><li><span class="tocitem">For Users</span><ul><li><a class="tocitem" href="../../../users/client-libraries/">Client Libraries</a></li></ul></li><li><span class="tocitem">For Operators</span><ul><li><a class="tocitem" href="../../../operators/hardware/">Supported Hardware</a></li><li><a class="tocitem" href="../../../operators/operating-systems/">Operating Systems</a></li><li><a class="tocitem" href="../../../operators/deployment-guide/">Deployment Guide</a></li><li><a class="tocitem" href="../../../operators/maintenance/">Maintenance</a></li><li><a class="tocitem" href="../../../operators/troubleshoot/">Troubleshoot</a></li></ul></li><li><span class="tocitem">Concepts</span><ul><li><a class="tocitem" href="../../../concepts/architecture/">Architecture</a></li><li><a class="tocitem" href="../../../concepts/user-management/">User Management</a></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Network</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../concepts/network/theory/">Theory</a></li><li><a class="tocitem" href="../../../concepts/network/firewalls/">Firewalls</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-4" type="checkbox"/><label class="tocitem" for="menuitem-5-4"><span class="docs-label">Kubernetes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../concepts/kubernetes/gardener/">Gardener</a></li><li><a class="tocitem" href="../../../concepts/kubernetes/cluster-api/">Cluster API</a></li><li><a class="tocitem" href="../../../concepts/kubernetes/cloud-controller-manager/">Cloud Controller Manager</a></li><li><a class="tocitem" href="../../../concepts/kubernetes/firewall-controller-manager/">Firewall Controller Manager</a></li><li><a class="tocitem" href="../../../concepts/kubernetes/isolated-clusters/">Isolated Cluster</a></li><li><a class="tocitem" href="../../../concepts/kubernetes/gpu-workers/">GPU Workers</a></li><li><a class="tocitem" href="../../../concepts/kubernetes/storage/">Storage</a></li></ul></li></ul></li><li><span class="tocitem">For CISOs</span><ul><li><input class="collapse-toggle" id="menuitem-6-1" type="checkbox" checked/><label class="tocitem" for="menuitem-6-1"><span class="docs-label">Security</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../principles/">Security Principles</a></li><li><a class="tocitem" href="../sbom/">SBOM</a></li><li><a class="tocitem" href="../cryptography/">Cryptography</a></li><li class="is-active"><a class="tocitem" href>Communication Matrix</a><ul class="internal"><li><a class="tocitem" href="#Plain-metal-stack"><span>Plain metal-stack</span></a></li><li><a class="tocitem" href="#With-Gardener"><span>With Gardener</span></a></li><li><a class="tocitem" href="#With-Cluster-API"><span>With Cluster API</span></a></li><li><a class="tocitem" href="#With-Lightbits"><span>With Lightbits</span></a></li></ul></li></ul></li></ul></li><li><span class="tocitem">For Developers</span><ul><li><a class="tocitem" href="../../../developers/proposals/">Enhancement Proposals</a></li><li><a class="tocitem" href="../../../developers/planning-meetings/">Planning Meetings</a></li><li><a class="tocitem" href="../../../developers/contribution-guideline/">Contribution Guideline</a></li><li><a class="tocitem" href="../../../developers/release-flow/">Release Flow</a></li><li><a class="tocitem" href="../../../developers/community/">Community</a></li></ul></li><li><span class="tocitem">References</span><ul><li><a class="tocitem" href="../../../references/apidocs/">API</a></li><li><input class="collapse-toggle" id="menuitem-8-2" type="checkbox"/><label class="tocitem" for="menuitem-8-2"><span class="docs-label">Components</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../../references/external/mini-lab/README/">mini-lab</a></li><li><a class="tocitem" href="../../../references/external/metalctl/README/">metalctl</a></li><li><a class="tocitem" href="../../../references/external/csi-driver-lvm/README/">csi-driver-lvm</a></li><li><a class="tocitem" href="../../../references/external/firewall-controller/README/">firewall-controller</a></li><li><a class="tocitem" href="../../../references/external/tailscale/README/">tailscale</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">For CISOs</a></li><li><a class="is-disabled">Security</a></li><li class="is-active"><a href>Communication Matrix</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Communication Matrix</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/metal-stack/docs.git" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="github.com/metal-stack/docs.git" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Communication-Matrix"><a class="docs-heading-anchor" href="#Communication-Matrix">Communication Matrix</a><a id="Communication-Matrix-1"></a><a class="docs-heading-anchor-permalink" href="#Communication-Matrix" title="Permalink"></a></h1><p>This matrix describes the communication between components in the metal-stack and their respective security properties. Please note that depending on your setup and configuration, some components may not be present, may have different security properties and might communicate differently than described here. The communication processes described here correspond to the standard configuration and setup.</p><p><strong>Legend</strong>:</p><ul><li><code>C</code>: Confidentiality, cryptography, encryption. Marked with an <code>x</code> if the communication is encrypted.</li><li><code>I</code>: Integrity of data. Marked with an <code>x</code> if the communication ensures data integrity.</li><li><code>Auth</code>: Authentication, ensures the identity of the communicating parties. Marked with an <code>x</code> if authentication is required.</li><li><code>Trust</code>: Only trusted networks involved. Marked with an <code>x</code> if the communication is only between trusted networks.</li></ul><h2 id="Plain-metal-stack"><a class="docs-heading-anchor" href="#Plain-metal-stack">Plain metal-stack</a><a id="Plain-metal-stack-1"></a><a class="docs-heading-anchor-permalink" href="#Plain-metal-stack" title="Permalink"></a></h2><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>The following table might not be displayed in completeness. Scroll to the right to see all entries.</p></div></div><table><tr><th style="text-align: center">No.</th><th style="text-align: center">Component</th><th style="text-align: center">Source Zone</th><th style="text-align: center">Protocol</th><th style="text-align: center">Destination</th><th style="text-align: center">Destination Zone</th><th style="text-align: center">Port</th><th style="text-align: center">C</th><th style="text-align: center">I</th><th style="text-align: center">Auth</th><th style="text-align: center">Trust</th><th style="text-align: center">Purpose</th><th style="text-align: center">Notes</th></tr><tr><td style="text-align: center">1.1</td><td style="text-align: center">metalctl</td><td style="text-align: center">Internet</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">1.2</td><td style="text-align: center">metalctl</td><td style="text-align: center">Internet</td><td style="text-align: center">HTTPS</td><td style="text-align: center">OIDC Provider</td><td style="text-align: center">unknown</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">Authentication &amp; Authorization</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">1.3</td><td style="text-align: center">metalctl</td><td style="text-align: center">Internet</td><td style="text-align: center">HTTPS</td><td style="text-align: center">GitHub</td><td style="text-align: center">Internet</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">Updater</td><td style="text-align: center">Used for updates and version checks.</td></tr><tr><td style="text-align: center">2.1</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">metal-db</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">28015</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">RethinkDB</td><td style="text-align: center">Database access.</td></tr><tr><td style="text-align: center">2.2</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">masterdata-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">8443</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Postgres</td><td style="text-align: center">Database access.</td></tr><tr><td style="text-align: center">2.3</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTP</td><td style="text-align: center">ipam</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">9090</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">Address Management</td><td style="text-align: center">Used to manage IP addresses.</td></tr><tr><td style="text-align: center">2.4</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TLS</td><td style="text-align: center">nsq</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">4150</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Machine Operation</td><td style="text-align: center">Used for machine operations and notifications.</td></tr><tr><td style="text-align: center">2.5</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTP</td><td style="text-align: center">nsq lookupd</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">4161</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Machine Operation</td><td style="text-align: center">Used for machine operations and notifications.</td></tr><tr><td style="text-align: center">2.6</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">auditing timescaledb</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">5432</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Audit Logs</td><td style="text-align: center">Logging of auditing events. Used for compliance.</td></tr><tr><td style="text-align: center">2.7</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">headscale</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">50443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Headscale API</td><td style="text-align: center">Headscale is used for VPN networking.</td></tr><tr><td style="text-align: center">2.8</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">S3-compatible Storage</td><td style="text-align: center">unknown</td><td style="text-align: center">443</td><td style="text-align: center">?</td><td style="text-align: center">?</td><td style="text-align: center">?</td><td style="text-align: center">?</td><td style="text-align: center">Firmware</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">2.9</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">OIDC Provider</td><td style="text-align: center">unknown</td><td style="text-align: center">443</td><td style="text-align: center">?</td><td style="text-align: center">?</td><td style="text-align: center">?</td><td style="text-align: center">?</td><td style="text-align: center">Authentication &amp; Authorization</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">3.1</td><td style="text-align: center">metal-apiserver</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">valkey</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">6379</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Background Jobs</td><td style="text-align: center">Used for background job processing and caching.</td></tr><tr><td style="text-align: center">3.2</td><td style="text-align: center">metal-apiserver</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">metal-db</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">28015</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">RethinkDB</td><td style="text-align: center">Database access.</td></tr><tr><td style="text-align: center">3.3</td><td style="text-align: center">metal-apiserver</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">masterdata-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">8080</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Postgres</td><td style="text-align: center">Database access.</td></tr><tr><td style="text-align: center">3.4</td><td style="text-align: center">metal-apiserver</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTP</td><td style="text-align: center">ipam</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">9090</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">Address Management</td><td style="text-align: center">Used to manage IP addresses.</td></tr><tr><td style="text-align: center">3.5</td><td style="text-align: center">metal-apiserver</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">auditing timescaledb</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">5432</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Audit Logs</td><td style="text-align: center">Logging of auditing events. Used for compliance.</td></tr><tr><td style="text-align: center">3.6</td><td style="text-align: center">metal-apiserver</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">headscale</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">50443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Headscale API</td><td style="text-align: center">Headscale is used for VPN networking.</td></tr><tr><td style="text-align: center">3.7</td><td style="text-align: center">metal-apiserver</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">OIDC Provider</td><td style="text-align: center">unknown</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">?</td><td style="text-align: center">Authentication &amp; Authorization</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">3.8</td><td style="text-align: center">metal-apiserver</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">S3-compatible Storage</td><td style="text-align: center">unknown</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">?</td><td style="text-align: center">?</td><td style="text-align: center">Firmware</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">4.1</td><td style="text-align: center">masterdata-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">masterdata-db</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">5432</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Postgres database access</td><td style="text-align: center">Database access.</td></tr><tr><td style="text-align: center">5.1</td><td style="text-align: center">ipam</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">ipam-db</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">5432</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Postgres database access</td><td style="text-align: center">Database access.</td></tr><tr><td style="text-align: center">6.1</td><td style="text-align: center">backup-restore-sidecar</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">S3-compatible Storage</td><td style="text-align: center">unknown</td><td style="text-align: center">443</td><td style="text-align: center">?</td><td style="text-align: center">?</td><td style="text-align: center">?</td><td style="text-align: center">?</td><td style="text-align: center">Backup &amp; Restore</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">6.2</td><td style="text-align: center">backup-restore-sidecar</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">Google API</td><td style="text-align: center">Internet</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">Backup &amp; Restore</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">6.3</td><td style="text-align: center">backup-restore-sidecar</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">Postgres</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">5432</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Backup &amp; Restore</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">6.4</td><td style="text-align: center">backup-restore-sidecar</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">RethinkDB</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">28015</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Backup &amp; Restore</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">6.5</td><td style="text-align: center">backup-restore-sidecar</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">ETCD</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">2380</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Backup &amp; Restore</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">6.6</td><td style="text-align: center">backup-restore-sidecar</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">Redis</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">6379</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Backup &amp; Restore</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">6.7</td><td style="text-align: center">backup-restore-sidecar</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">keydb</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">6379</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Backup &amp; Restore</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">7.1</td><td style="text-align: center">metal-console</td><td style="text-align: center">Partition Management</td><td style="text-align: center">HTTP</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">8080</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">7.2</td><td style="text-align: center">metal-console</td><td style="text-align: center">Partition Management</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-bmc</td><td style="text-align: center">Partition Management</td><td style="text-align: center">3333</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Machine Management</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">8.1</td><td style="text-align: center">ssh</td><td style="text-align: center">unknown</td><td style="text-align: center">TCP</td><td style="text-align: center">metal-console</td><td style="text-align: center">Partition Management</td><td style="text-align: center">10001</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">?</td><td style="text-align: center">Machine Access (SSH)</td><td style="text-align: center">Used to access the metal-console via SSH.</td></tr><tr><td style="text-align: center">9.1</td><td style="text-align: center">pixiecore</td><td style="text-align: center">Partition Management</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">10.1</td><td style="text-align: center">metal-bmc</td><td style="text-align: center">Partition Management</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">10.2</td><td style="text-align: center">metal-bmc</td><td style="text-align: center">Partition Management</td><td style="text-align: center">TLS</td><td style="text-align: center">nsq</td><td style="text-align: center">Partition Management</td><td style="text-align: center">4150</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Machine Operation</td><td style="text-align: center">Used for machine operations and notifications.</td></tr><tr><td style="text-align: center">10.2</td><td style="text-align: center">metal-bmc</td><td style="text-align: center">Partition Management</td><td style="text-align: center">IPMI</td><td style="text-align: center">machine BMC</td><td style="text-align: center">Machine</td><td style="text-align: center">623</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Machine Operation</td><td style="text-align: center">Used for BMC management.</td></tr><tr><td style="text-align: center">11.1</td><td style="text-align: center">metal-cache-image-sync</td><td style="text-align: center">Partition Management</td><td style="text-align: center">HTTPS</td><td style="text-align: center">S3-compatible Storage</td><td style="text-align: center">unknown</td><td style="text-align: center">443</td><td style="text-align: center">?</td><td style="text-align: center">?</td><td style="text-align: center">?</td><td style="text-align: center"></td><td style="text-align: center">Image Caching and Sync</td><td style="text-align: center">Optional. Needs to be configured.</td></tr><tr><td style="text-align: center">11.2</td><td style="text-align: center">metal-cache-image-sync</td><td style="text-align: center">Partition Management</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">12.1</td><td style="text-align: center">metal-core</td><td style="text-align: center">Partition Switch Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">12.2</td><td style="text-align: center">metal-core</td><td style="text-align: center">Partition Switch Plane</td><td style="text-align: center">TCP</td><td style="text-align: center">SONiC ConfigDB Redis</td><td style="text-align: center">Switch</td><td style="text-align: center">6379</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">13.1</td><td style="text-align: center">metal-hammer</td><td style="text-align: center">Machine</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">13.2</td><td style="text-align: center">metal-hammer</td><td style="text-align: center">Machine</td><td style="text-align: center">HTTPS</td><td style="text-align: center">pixiecore</td><td style="text-align: center">Partition Management</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">Machine Management</td><td style="text-align: center">Used for machine management.</td></tr><tr><td style="text-align: center">13.3</td><td style="text-align: center">metal-hammer</td><td style="text-align: center">Machine</td><td style="text-align: center">HTTPS</td><td style="text-align: center">Prometheus</td><td style="text-align: center">unknown</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Monitoring</td><td style="text-align: center">Actively pushes metrics to Prometheus.</td></tr><tr><td style="text-align: center">13.4</td><td style="text-align: center">metal-hammer</td><td style="text-align: center">Machine</td><td style="text-align: center">HTTP</td><td style="text-align: center">HAProxy</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">9001</td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">Image Caching and Pulling</td><td style="text-align: center">Used to pull images via HAProxy.</td></tr><tr><td style="text-align: center">13.5</td><td style="text-align: center">metal-hammer</td><td style="text-align: center">Machine</td><td style="text-align: center">HTTPS</td><td style="text-align: center">Container Registry</td><td style="text-align: center">internet</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">?</td><td style="text-align: center"></td><td style="text-align: center">Image and Pulling</td><td style="text-align: center">Used to pull images from the registry.</td></tr><tr><td style="text-align: center">14.1</td><td style="text-align: center">machine firmware</td><td style="text-align: center">Machine</td><td style="text-align: center">HTTPS</td><td style="text-align: center">pixiecore</td><td style="text-align: center">Partition Management</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">Machine Management</td><td style="text-align: center">Used to provision machines.</td></tr><tr><td style="text-align: center">14.2</td><td style="text-align: center">machine firmware</td><td style="text-align: center">Machine</td><td style="text-align: center">TFTP</td><td style="text-align: center">pixiecore</td><td style="text-align: center">Partition Management</td><td style="text-align: center">69</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">Machine OS Provisioning</td><td style="text-align: center">Used to provision machine firmware.</td></tr><tr><td style="text-align: center">15.1</td><td style="text-align: center">machine OS</td><td style="text-align: center">Machine</td><td style="text-align: center">DHCP</td><td style="text-align: center">DHCP Server</td><td style="text-align: center">Machine</td><td style="text-align: center">67/68</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">Machine OS Provisioning</td><td style="text-align: center">Used to obtain an IP address.</td></tr><tr><td style="text-align: center">15.2</td><td style="text-align: center">machine OS</td><td style="text-align: center">Machine</td><td style="text-align: center">DNS</td><td style="text-align: center">DNS Server</td><td style="text-align: center">Machine</td><td style="text-align: center">53</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">Machine OS Resolution</td><td style="text-align: center">Used to resolve hostnames.</td></tr><tr><td style="text-align: center">15.3</td><td style="text-align: center">machine OS</td><td style="text-align: center">Machine</td><td style="text-align: center">NTP</td><td style="text-align: center">NTP Server</td><td style="text-align: center">Machine</td><td style="text-align: center">123</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">Machine OS Time Sync</td><td style="text-align: center">Used to synchronize time with the NTP server.</td></tr><tr><td style="text-align: center">16.1</td><td style="text-align: center">metal-metrics-exporter</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Monitoring</td><td style="text-align: center">Scrapes metrics from metal-api.</td></tr><tr><td style="text-align: center">17.1</td><td style="text-align: center">prometheus</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Monitoring</td><td style="text-align: center">Scrapes metrics from metal-api.</td></tr><tr><td style="text-align: center">17.2</td><td style="text-align: center">prometheus</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-metrics-exporter</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">9080</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">x</td><td style="text-align: center">Monitoring</td><td style="text-align: center">Scrapes metrics from metal-metrics-exporter.</td></tr><tr><td style="text-align: center">17.3</td><td style="text-align: center">prometheus</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-apiserver</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Monitoring</td><td style="text-align: center">Scrapes metrics from metal-apiserver.</td></tr><tr><td style="text-align: center">17.4</td><td style="text-align: center">prometheus</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">HTTPS</td><td style="text-align: center">masterdata-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">2113</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Monitoring</td><td style="text-align: center">Scrapes metrics from masterdata-api.</td></tr></table><h2 id="With-Gardener"><a class="docs-heading-anchor" href="#With-Gardener">With Gardener</a><a id="With-Gardener-1"></a><a class="docs-heading-anchor-permalink" href="#With-Gardener" title="Permalink"></a></h2><p>When using metal-stack in conjunction with Gardener, the following communications will additionally be used by metal-stack components.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>The following table might not be displayed in completeness. Scroll to the right to see all entries.</p></div></div><table><tr><th style="text-align: center">No.</th><th style="text-align: center">Component</th><th style="text-align: center">Source Zone</th><th style="text-align: center">Protocol</th><th style="text-align: center">Destination</th><th style="text-align: center">Destination Zone</th><th style="text-align: center">Port</th><th style="text-align: center">C</th><th style="text-align: center">I</th><th style="text-align: center">Auth</th><th style="text-align: center">Trust</th><th style="text-align: center">Purpose</th><th style="text-align: center">Notes</th></tr><tr><td style="text-align: center">G1.1</td><td style="text-align: center">metal-ccm</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">G1.2</td><td style="text-align: center">metal-ccm</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">kube-apiserver</td><td style="text-align: center">Shoot Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">G2.1</td><td style="text-align: center">firewall-controller-manager</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for firewall management.</td></tr><tr><td style="text-align: center">G2.2</td><td style="text-align: center">firewall-controller-manager</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">kube-apiserver</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for firewall management.</td></tr><tr><td style="text-align: center">G2.3</td><td style="text-align: center">firewall-controller-manager</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">kube-apiserver</td><td style="text-align: center">Shoot Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for firewall management.</td></tr><tr><td style="text-align: center">G3.1</td><td style="text-align: center">firewall-controller</td><td style="text-align: center">Firewall</td><td style="text-align: center">HTTPS</td><td style="text-align: center">kube-apiserver</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for firewall management.</td></tr><tr><td style="text-align: center">G3.2</td><td style="text-align: center">firewall-controller</td><td style="text-align: center">Firewall</td><td style="text-align: center">HTTPS</td><td style="text-align: center">kube-apiserver</td><td style="text-align: center">Shoot Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for firewall management.</td></tr><tr><td style="text-align: center">G3.3</td><td style="text-align: center">firewall-controller</td><td style="text-align: center">Firewall</td><td style="text-align: center">HTTPS</td><td style="text-align: center">Controller URL</td><td style="text-align: center">Internet</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center"></td><td style="text-align: center">Self-Update</td><td style="text-align: center">Controller URL and version provided by FCM.</td></tr><tr><td style="text-align: center">G4.1</td><td style="text-align: center">machine-controller-manager-provider-metal</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">G5.1</td><td style="text-align: center">gardener-extension-provider-metal</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">G5.2</td><td style="text-align: center">gardener-extension-provider-metal</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">kube-apiserver</td><td style="text-align: center">Garden Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">G5.3</td><td style="text-align: center">gardener-extension-provider-metal</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">kube-apiserver</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">G5.4</td><td style="text-align: center">gardener-extension-provider-metal</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">kube-apiserver</td><td style="text-align: center">Shoot Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr></table><h2 id="With-Cluster-API"><a class="docs-heading-anchor" href="#With-Cluster-API">With Cluster API</a><a id="With-Cluster-API-1"></a><a class="docs-heading-anchor-permalink" href="#With-Cluster-API" title="Permalink"></a></h2><p>By using the Cluster API provider for metal-stack, the following communictations are required by metal-stack components.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>The following table might not be displayed in completeness. Scroll to the right to see all entries.</p></div></div><table><tr><th style="text-align: center">No.</th><th style="text-align: center">Component</th><th style="text-align: center">Source Zone</th><th style="text-align: center">Protocol</th><th style="text-align: center">Destination</th><th style="text-align: center">Destination Zone</th><th style="text-align: center">Port</th><th style="text-align: center">C</th><th style="text-align: center">I</th><th style="text-align: center">Auth</th><th style="text-align: center">Trust</th><th style="text-align: center">Purpose</th><th style="text-align: center">Notes</th></tr><tr><td style="text-align: center">C1.1</td><td style="text-align: center">metal-ccm</td><td style="text-align: center">Workload Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">C1.2</td><td style="text-align: center">metal-ccm</td><td style="text-align: center">Workload Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">kube-apiserver</td><td style="text-align: center">Workload Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">C2.1</td><td style="text-align: center">cluster-api-provider-metal-stack</td><td style="text-align: center">Management Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">metal-api</td><td style="text-align: center">Metal Control Plane</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">API Requests</td><td style="text-align: center">Used for management operations.</td></tr></table><h2 id="With-Lightbits"><a class="docs-heading-anchor" href="#With-Lightbits">With Lightbits</a><a id="With-Lightbits-1"></a><a class="docs-heading-anchor-permalink" href="#With-Lightbits" title="Permalink"></a></h2><p>In order to use Lightbits as a storage solution, the following communications are required by metal-stack components.</p><div class="admonition is-info"><header class="admonition-header">Info</header><div class="admonition-body"><p>The following table might not be displayed in completeness. Scroll to the right to see all entries.</p></div></div><table><tr><th style="text-align: center">No.</th><th style="text-align: center">Component</th><th style="text-align: center">Source Zone</th><th style="text-align: center">Protocol</th><th style="text-align: center">Destination</th><th style="text-align: center">Destination Zone</th><th style="text-align: center">Port</th><th style="text-align: center">C</th><th style="text-align: center">I</th><th style="text-align: center">Auth</th><th style="text-align: center">Trust</th><th style="text-align: center">Purpose</th><th style="text-align: center">Notes</th></tr><tr><td style="text-align: center">L1.1</td><td style="text-align: center">duros-controller</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">duros-api</td><td style="text-align: center">Lightbits Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Storage</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">L1.2</td><td style="text-align: center">duros-controller</td><td style="text-align: center">Seed Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">kube-apiserver</td><td style="text-align: center">Shoot Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Kubernetes</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">L2.1</td><td style="text-align: center">lb-csi-controller</td><td style="text-align: center">Shoot Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">duros-api</td><td style="text-align: center">Lightbits Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">Storage</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">L2.2</td><td style="text-align: center">lb-csi-controller</td><td style="text-align: center">Shoot Cluster</td><td style="text-align: center">HTTPS</td><td style="text-align: center">kube-apiserver</td><td style="text-align: center">Shoot Cluster</td><td style="text-align: center">443</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">Kubernetes</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">L3.1</td><td style="text-align: center">lb-csi-node</td><td style="text-align: center">Shoot Cluster</td><td style="text-align: center">TCP</td><td style="text-align: center">duros-api</td><td style="text-align: center">Lightbits Cluster</td><td style="text-align: center">4420</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">Storage</td><td style="text-align: center">Used for management operations.</td></tr><tr><td style="text-align: center">L3.2</td><td style="text-align: center">lb-csi-node</td><td style="text-align: center">Shoot Cluster</td><td style="text-align: center">TCP</td><td style="text-align: center">duros-api</td><td style="text-align: center">Lightbits Cluster</td><td style="text-align: center">8009</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center">x</td><td style="text-align: center"></td><td style="text-align: center">Storage</td><td style="text-align: center">Used for management operations.</td></tr></table></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../cryptography/">« Cryptography</a><a class="docs-footer-nextpage" href="../../../developers/proposals/">Enhancement Proposals »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Tuesday 5 August 2025 07:34">Tuesday 5 August 2025</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
