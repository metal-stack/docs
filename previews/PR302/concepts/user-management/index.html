<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>User Management · metal-stack</title><meta name="title" content="User Management · metal-stack"/><meta property="og:title" content="User Management · metal-stack"/><meta property="twitter:title" content="User Management · metal-stack"/><meta name="description" content="Documentation for metal-stack."/><meta property="og:description" content="Documentation for metal-stack."/><meta property="twitter:description" content="Documentation for metal-stack."/><meta property="og:url" content="https://docs.metal-stack.io/concepts/user-management/"/><meta property="twitter:url" content="https://docs.metal-stack.io/concepts/user-management/"/><link rel="canonical" href="https://docs.metal-stack.io/concepts/user-management/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../assets/youtube.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="metal-stack logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">metal-stack</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">General</span><ul><li><a class="tocitem" href="../../getting-started/">Getting Started</a></li><li><a class="tocitem" href="../why-metal-stack/">Why metal-stack</a></li><li><a class="tocitem" href="../why-bare-metal/">Why Bare Metal</a></li><li><a class="tocitem" href="../../general/flavors-of-metal-stack/">Flavors of metal-stack</a></li></ul></li><li><span class="tocitem">For Users</span><ul><li><a class="tocitem" href="../../users/client-libraries/">Client Libraries</a></li></ul></li><li><span class="tocitem">For Operators</span><ul><li><a class="tocitem" href="../../operators/hardware/">Supported Hardware</a></li><li><a class="tocitem" href="../../operators/operating-systems/">Operating Systems</a></li><li><a class="tocitem" href="../../operators/deployment-guide/">Deployment Guide</a></li><li><a class="tocitem" href="../../operators/maintenance/">Maintenance</a></li><li><a class="tocitem" href="../../operators/troubleshoot/">Troubleshoot</a></li></ul></li><li><span class="tocitem">Concepts</span><ul><li><a class="tocitem" href="../architecture/">Architecture</a></li><li class="is-active"><a class="tocitem" href>User Management</a><ul class="internal"><li><a class="tocitem" href="#Default-Users"><span>Default Users</span></a></li><li><a class="tocitem" href="#OIDC"><span>OIDC</span></a></li><li><a class="tocitem" href="#Role-Mapping"><span>Role Mapping</span></a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-3" type="checkbox"/><label class="tocitem" for="menuitem-5-3"><span class="docs-label">Network</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../network/theory/">Theory</a></li><li><a class="tocitem" href="../network/firewalls/">Firewalls</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5-4" type="checkbox"/><label class="tocitem" for="menuitem-5-4"><span class="docs-label">Kubernetes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../kubernetes/gardener/">Gardener</a></li><li><a class="tocitem" href="../kubernetes/cluster-api/">Cluster API</a></li><li><a class="tocitem" href="../kubernetes/cloud-controller-manager/">Cloud Controller Manager</a></li><li><a class="tocitem" href="../kubernetes/firewall-controller-manager/">Firewall Controller Manager</a></li><li><a class="tocitem" href="../kubernetes/isolated-clusters/">Isolated Cluster</a></li><li><a class="tocitem" href="../kubernetes/gpu-workers/">GPU Workers</a></li><li><a class="tocitem" href="../kubernetes/storage/">Storage</a></li></ul></li></ul></li><li><span class="tocitem">For CISOs</span><ul><li><input class="collapse-toggle" id="menuitem-6-1" type="checkbox"/><label class="tocitem" for="menuitem-6-1"><span class="docs-label">Security</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../cisos/security/principles/">Security Principles</a></li><li><a class="tocitem" href="../../cisos/security/sbom/">SBOM</a></li><li><a class="tocitem" href="../../cisos/security/cryptography/">Cryptography</a></li><li><a class="tocitem" href="../../cisos/security/communication-matrix/">Communication Matrix</a></li></ul></li></ul></li><li><span class="tocitem">For Developers</span><ul><li><a class="tocitem" href="../../developers/proposals/">Enhancement Proposals</a></li><li><a class="tocitem" href="../../developers/planning-meetings/">Planning Meetings</a></li><li><a class="tocitem" href="../../developers/contribution-guideline/">Contribution Guideline</a></li><li><a class="tocitem" href="../../developers/release-flow/">Release Flow</a></li><li><a class="tocitem" href="../../developers/community/">Community</a></li></ul></li><li><span class="tocitem">References</span><ul><li><a class="tocitem" href="../../references/apidocs/">API</a></li><li><input class="collapse-toggle" id="menuitem-8-2" type="checkbox"/><label class="tocitem" for="menuitem-8-2"><span class="docs-label">Components</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../references/external/mini-lab/README/">mini-lab</a></li><li><a class="tocitem" href="../../references/external/metalctl/README/">metalctl</a></li><li><a class="tocitem" href="../../references/external/csi-driver-lvm/README/">csi-driver-lvm</a></li><li><a class="tocitem" href="../../references/external/firewall-controller/README/">firewall-controller</a></li><li><a class="tocitem" href="../../references/external/tailscale/README/">tailscale</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Concepts</a></li><li class="is-active"><a href>User Management</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>User Management</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/metal-stack/docs.git" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="github.com/metal-stack/docs.git" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="User-Management"><a class="docs-heading-anchor" href="#User-Management">User Management</a><a id="User-Management-1"></a><a class="docs-heading-anchor-permalink" href="#User-Management" title="Permalink"></a></h1><p>At the moment, metal-stack can more or less be seen as a low-level API that does not scope access based on projects and tenants. Fine-grained access control with full multi-tenancy support is actively worked on in <a href="../../developers/proposals/MEP4/README/">MEP4</a>.</p><p>Until then projects and tenants can be created, but have no effect on access control.</p><h2 id="Default-Users"><a class="docs-heading-anchor" href="#Default-Users">Default Users</a><a id="Default-Users-1"></a><a class="docs-heading-anchor-permalink" href="#Default-Users" title="Permalink"></a></h2><p>The current system provides three default users with their corresponding roles:</p><ul><li><strong>Metal-Admin</strong> is an <strong>Admin</strong> can perform all actions.</li><li><strong>Metal-Edit</strong> has the <strong>Edit</strong> role and may create, edit and delete most resources.</li><li><strong>Metal-Viewer</strong> is a <strong>Viewer</strong> and may only view resources and may access machines.</li></ul><p>Each of these users have a corresponding <a href="https://en.wikipedia.org/wiki/HMAC">HMAC</a> token, which can be used to authenticate against the API. The tokens do not expire and can be used as long as the service is running. Be cautious with who you share the tokens with.</p><h2 id="OIDC"><a class="docs-heading-anchor" href="#OIDC">OIDC</a><a id="OIDC-1"></a><a class="docs-heading-anchor-permalink" href="#OIDC" title="Permalink"></a></h2><p>Currently the only way to act as a different user than the default ones, is by using OIDC authentication. Here the OIDC provider decides which role the user has.</p><h2 id="Role-Mapping"><a class="docs-heading-anchor" href="#Role-Mapping">Role Mapping</a><a id="Role-Mapping-1"></a><a class="docs-heading-anchor-permalink" href="#Role-Mapping" title="Permalink"></a></h2><p>The following table shows which role is required to access the endpoints of the various services at a high level. Only the minimum role required to access the group of endpoints is shown. For the more in-depth documentation of all endpoints, head over to the <a href="../../references/apidocs/">API documentation</a>.</p><table><tr><th style="text-align: right"><strong>Service</strong></th><th style="text-align: right"><strong>Group of Endpoints</strong></th><th style="text-align: right"><strong>Minimum Role</strong></th></tr><tr><td style="text-align: right"><strong>audit-service</strong></td><td style="text-align: right">Reading audit traces</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"><strong>filesystem-service</strong></td><td style="text-align: right">Reading filesystem layouts</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Managing filesystem layouts</td><td style="text-align: right">Admin</td></tr><tr><td style="text-align: right"><strong>firewall-service</strong></td><td style="text-align: right">Reading firewalls</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Allocating firewalls</td><td style="text-align: right">Editor</td></tr><tr><td style="text-align: right"><strong>firmware-service</strong></td><td style="text-align: right">All endpoints</td><td style="text-align: right">Admin</td></tr><tr><td style="text-align: right"><strong>image-service</strong></td><td style="text-align: right">Reading images</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Managing images</td><td style="text-align: right">Admin</td></tr><tr><td style="text-align: right"><strong>ip-service</strong></td><td style="text-align: right">Reading IPs</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Managing IPs</td><td style="text-align: right">Editor</td></tr><tr><td style="text-align: right"><strong>machine-service</strong></td><td style="text-align: right">Reading machines and issues</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Managing machines and issues</td><td style="text-align: right">Editor</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">IPMI operations</td><td style="text-align: right">Editor</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Updating, deleting machines</td><td style="text-align: right">Admin</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Updating firmware</td><td style="text-align: right">Admin</td></tr><tr><td style="text-align: right"><strong>network-service</strong></td><td style="text-align: right">Reading networks</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Allocating and freeing networks</td><td style="text-align: right">Editor</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Managing networks</td><td style="text-align: right">Admin</td></tr><tr><td style="text-align: right"><strong>partition-service</strong></td><td style="text-align: right">Reading partitions</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Managing partitions</td><td style="text-align: right">Admin</td></tr><tr><td style="text-align: right"><strong>project-service</strong></td><td style="text-align: right">Reading projects</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Managing projects</td><td style="text-align: right">Admin</td></tr><tr><td style="text-align: right"><strong>size-service</strong></td><td style="text-align: right">Reading sizes</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Managing reservations</td><td style="text-align: right">Editor</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Managing sizes</td><td style="text-align: right">Admin</td></tr><tr><td style="text-align: right"><strong>sizeimageconstraint-service</strong></td><td style="text-align: right">Reading size image constraints</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Managing size image constraints</td><td style="text-align: right">Admin</td></tr><tr><td style="text-align: right"><strong>switch-service</strong></td><td style="text-align: right">Reading switches</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Managing switches</td><td style="text-align: right">Admin</td></tr><tr><td style="text-align: right"><strong>tenant-service</strong></td><td style="text-align: right">Reading tenants</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"></td><td style="text-align: right">Managing tenants</td><td style="text-align: right">Admin</td></tr><tr><td style="text-align: right"><strong>user-service</strong></td><td style="text-align: right">Getting user information</td><td style="text-align: right">Viewer</td></tr><tr><td style="text-align: right"><strong>vpn-service</strong></td><td style="text-align: right">Getting VPN auth key</td><td style="text-align: right">Admin</td></tr></table></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../architecture/">« Architecture</a><a class="docs-footer-nextpage" href="../network/theory/">Theory »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Wednesday 6 August 2025 08:38">Wednesday 6 August 2025</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
