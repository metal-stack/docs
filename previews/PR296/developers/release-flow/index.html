<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Release Flow · metal-stack</title><meta name="title" content="Release Flow · metal-stack"/><meta property="og:title" content="Release Flow · metal-stack"/><meta property="twitter:title" content="Release Flow · metal-stack"/><meta name="description" content="Documentation for metal-stack."/><meta property="og:description" content="Documentation for metal-stack."/><meta property="twitter:description" content="Documentation for metal-stack."/><meta property="og:url" content="https://docs.metal-stack.io/developers/release-flow/"/><meta property="twitter:url" content="https://docs.metal-stack.io/developers/release-flow/"/><link rel="canonical" href="https://docs.metal-stack.io/developers/release-flow/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/><link href="../../assets/youtube.css" rel="stylesheet" type="text/css"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="metal-stack logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">metal-stack</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../getting-started/">Getting Started</a></li><li><span class="tocitem">Concepts</span><ul><li><a class="tocitem" href="../../concepts/why-metal-stack/">Why metal-stack</a></li><li><a class="tocitem" href="../../concepts/why-bare-metal/">Why Bare Metal</a></li><li><a class="tocitem" href="../../concepts/architecture/">Architecture</a></li><li><input class="collapse-toggle" id="menuitem-3-4" type="checkbox"/><label class="tocitem" for="menuitem-3-4"><span class="docs-label">Network</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../concepts/network/theory/">Theory</a></li><li><a class="tocitem" href="../../concepts/network/firewalls/">Firewalls</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-3-5" type="checkbox"/><label class="tocitem" for="menuitem-3-5"><span class="docs-label">Kubernetes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../concepts/kubernetes/cloud-controller-manager/">Cloud Controller Manager</a></li><li><a class="tocitem" href="../../concepts/kubernetes/firewall-controller-manager/">Firewall Controller Manager</a></li><li><a class="tocitem" href="../../concepts/kubernetes/gardener/">Gardener</a></li><li><a class="tocitem" href="../../concepts/kubernetes/isolated-clusters/">Isolated Cluster</a></li><li><a class="tocitem" href="../../concepts/kubernetes/gpu-workers/">GPU Workers</a></li><li><a class="tocitem" href="../../concepts/kubernetes/storage/">Storage</a></li></ul></li></ul></li><li><span class="tocitem">For Operators</span><ul><li><a class="tocitem" href="../../operators/hardware/">Supported Hardware</a></li><li><a class="tocitem" href="../../operators/operating-systems/">Operating Systems</a></li><li><a class="tocitem" href="../../operators/deployment-guide/">Deployment Guide</a></li><li><a class="tocitem" href="../../operators/maintenance/">Maintenance</a></li><li><a class="tocitem" href="../../operators/troubleshoot/">Troubleshoot</a></li></ul></li><li><span class="tocitem">For Users</span><ul><li><a class="tocitem" href="../../users/client-libraries/">Client Libraries</a></li></ul></li><li><span class="tocitem">For Developers</span><ul><li><a class="tocitem" href="../proposals/">Enhancement Proposals</a></li><li><a class="tocitem" href="../planning-meetings/">Planning Meetings</a></li><li><a class="tocitem" href="../contribution-guideline/">Contribution Guideline</a></li><li class="is-active"><a class="tocitem" href>Release Flow</a><ul class="internal"><li><a class="tocitem" href="#Release-Flow"><span>Release Flow</span></a></li><li><a class="tocitem" href="#FAQ"><span>FAQ</span></a></li></ul></li><li><a class="tocitem" href="../community/">Community</a></li></ul></li><li><span class="tocitem">References</span><ul><li><a class="tocitem" href="../../references/apidocs/">API</a></li><li><input class="collapse-toggle" id="menuitem-7-2" type="checkbox"/><label class="tocitem" for="menuitem-7-2"><span class="docs-label">Components</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../references/external/mini-lab/README/">mini-lab</a></li><li><a class="tocitem" href="../../references/external/metalctl/README/">metalctl</a></li><li><a class="tocitem" href="../../references/external/csi-driver-lvm/README/">csi-driver-lvm</a></li><li><a class="tocitem" href="../../references/external/firewall-controller/README/">firewall-controller</a></li><li><a class="tocitem" href="../../references/external/tailscale/README/">tailscale</a></li></ul></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">For Developers</a></li><li class="is-active"><a href>Release Flow</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Release Flow</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/metal-stack/docs.git" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="github.com/metal-stack/docs.git" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Releases"><a class="docs-heading-anchor" href="#Releases">Releases</a><a id="Releases-1"></a><a class="docs-heading-anchor-permalink" href="#Releases" title="Permalink"></a></h1><p>The metal-stack contains of many microservices that depend on each other. The automated release flow is there to ensure that all components work together flawlessly for every metal-stack release.</p><p>Releases and integration tests are published through our <a href="https://github.com/metal-stack/releases">release repository</a>. You can also find the <a href="https://github.com/metal-stack/releases/releases">release notes</a> for this metal-stack version in there. The release notes contain information about new features, upgrade paths and bug fixes.</p><p>If you want, you can sign up at our Slack channel where we are announcing every new release. Often, we provide additional information for metal-stack administrators and adopters at this place, too.</p><p>This document is intended for developers, especially maintainers of metal-stack projects.</p><h2 id="Release-Flow"><a class="docs-heading-anchor" href="#Release-Flow">Release Flow</a><a id="Release-Flow-1"></a><a class="docs-heading-anchor-permalink" href="#Release-Flow" title="Permalink"></a></h2><p>The following diagram attempts to describe our current release flow:</p><p><img src="../release_flow.drawio.svg" alt/></p><p>A release is created in the following way:</p><ul><li>Individual repository maintainers within the metal-stack Github Org can publish a release of their component.</li><li>This release is automatically pushed to the <code>develop</code> branch of the release repository by the metal-robot.</li><li>The push triggers a small release integration test through the mini-lab.</li><li>To contribute components that are not directly part of the release vector, a pull request must be made against the <code>develop</code> branch of the release repository. Release maintainers may push directly to the <code>develop</code> branch.</li><li>The release maintainers can <code>/freeze</code> the <code>develop</code> branch, effectively stopping the metal-robot from pushing component releases to this branch.</li><li>The <code>develop</code> branch is tagged by a release maintainer with a <code>-rc.x</code> suffix to create a <strong>release candidate</strong>.</li><li>The release candidate must pass a large integration test suite on a real environment, which is currently run by FI-TS. It tests the entire machine provisioning engine including the integration with Gardener, the deployment, metal-images and Kubernetes conformance tests.</li><li>If the integration tests pass, the PR of the <code>develop</code> branch must be approved by at least two release maintainers.</li><li>A release is created via Github releases, including all release notes, with a tag on the <code>main</code> branch.</li></ul><h2 id="FAQ"><a class="docs-heading-anchor" href="#FAQ">FAQ</a><a id="FAQ-1"></a><a class="docs-heading-anchor-permalink" href="#FAQ" title="Permalink"></a></h2><p><strong>Question: I need PR #xyz to go into the release, why did you not include it?</strong></p><p>Answer: It&#39;s not on purpose if we miss a PR to be included into a metal-stack release. Please use the pending pull request from <code>develop</code> into <code>master</code> as soon as it is open and comment which pull request you want to have included into the release. Also consider attending our planning meetings or contact us in our Slack channel if you have urgent requirements that need to be dealt with.</p><p><strong>Question: Who is responsible for the releases? Who can freeze a release?</strong></p><p>Answer: Every repository in metal-stack has a <code>CODEOWNERS</code> file pointing to a maintainer team. This is also true for the releases repository. Only release repository maintainers are allowed to <code>/freeze</code> a release (meaning the metal-robot does not automatically append new component releases to the release vector anymore).</p><p><strong>Question: I can&#39;t push to the <code>develop</code> branch of this repository? How can I request changes to the release vector?</strong></p><p>Answer: Most changes are automatically integrated by the metal-robot. For manually managed components, please raise a pull request against the <code>develop</code> branch. Only release maintainers are allowed to push to <code>develop</code> as otherwise it would be possible to mess up the release pipeline.</p><p><strong>Question: What requirements need to be fulfilled to add a repository to the release vector?</strong></p><p>Please see the section below named <a href="#requirements-for-release-vector-repositories">Requirements for Release Vector Repositories</a>.</p><h3 id="Requirements-for-Release-Vector-Repositories"><a class="docs-heading-anchor" href="#Requirements-for-Release-Vector-Repositories">Requirements for Release Vector Repositories</a><a id="Requirements-for-Release-Vector-Repositories-1"></a><a class="docs-heading-anchor-permalink" href="#Requirements-for-Release-Vector-Repositories" title="Permalink"></a></h3><p>Before adding a repository in the metal-stack org to the releases repository, it is advised for the maintainer to fulfill the following points:</p><ul><li><p>The following files should be present at the repository root:</p><ul><li><p><a href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners">CODEOWNERS</a></p><ul><li>When a repository is created, the metal-robot automatically creates a &lt;repository-name&gt;-maintainers team in our GitHub org.</li><li>The CODEOWNERS file should reference this team.</li><li>The team should contain at least two maintainers.</li></ul></li><li><p><code>LICENSE</code></p><ul><li>This usually should be MIT with &quot;metal-stack&quot; as authors.</li></ul></li><li><p><code>CONTRIBUTING.md</code></p><ul><li><p>This should contain the following content:</p><pre><code class="nohighlight hljs"># Contributing

Please check out the [contributing section](https://docs.metal-stack.io/stable/development/contributing/) in our [docs](https://docs.metal-stack.io/).</code></pre></li></ul></li><li><p><code>README.md</code></p></li></ul></li><li><p>The <code>developers-core</code> team should be given repository access with <code>write</code> role, the codeowners team should have the <code>maintain</code> role</p></li><li><p>Release artifacts should have an SPDX-formatted SBOM attached.</p><ul><li>For container images these are embedded using Buildx.</li></ul></li><li><p>The following branch protection rules should be set:</p><ul><li>The mainline should be protected.</li><li>A pull request should be required before merging (required by at least one code owner).</li><li>Status checks should be required to pass.</li><li>Force push should not be allowed on this branch.</li></ul></li><li><p>One person from the releases maintainers has to add the repository to the metal-robot in order to pick up the releases, add them to the release vector and generate release notes.</p></li></ul><h3 id="How-To-Release-a-Project"><a class="docs-heading-anchor" href="#How-To-Release-a-Project">How-To Release a Project</a><a id="How-To-Release-a-Project-1"></a><a class="docs-heading-anchor-permalink" href="#How-To-Release-a-Project" title="Permalink"></a></h3><p><a href="https://github.com/release-drafter/release-drafter">release-drafter</a> is preferred in order to generate release notes from merged PRs for your projects. It should be triggered for pushes on your main branch.</p><p>The draft is then used to create a project release. The release has to be published through the Github UI as demonstrated in the screenshot below.</p><p><strong>&lt;span style=&quot;color:red&quot;&gt;Tagging the repository is not enough as repository tagging does not associate your release notes to your release!&lt;/span&gt;</strong></p><p><img src="../release.png" alt/></p><p>Some further remarks:</p><ul><li><p>Use semver versions with <code>v</code> prefix for your tags</p></li><li><p>Name your release after your release tag</p></li><li><p>The metal-robot only picks up lines from your release notes that start with <code>-</code> or <code>*</code> (unordered list items) and appends them to the according section in the aggregated release draft</p></li><li><p>A tag created through a Github UI release does not trigger a <code>push</code> event . This means, your pipeline will not start to run with the <code>push</code> trigger when publishing through the UI.</p><p>Instead, use the <code>published</code> <a href="https://docs.github.com/en/actions/reference/events-that-trigger-workflows#release">release event trigger</a> for your actions:</p><pre><code class="language-yaml hljs">on:
 release:
   types:
   - published</code></pre></li><li><p>In case they are necessary, please do not forget to include <code>NOTEWORTHY</code>, <code>ACTIONS_REQUIRED</code> or <code>BREAKING_CHANGE</code> sections into releases. More information on those release draft sections can be read in a pull request template.</p></li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../contribution-guideline/">« Contribution Guideline</a><a class="docs-footer-nextpage" href="../community/">Community »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Friday 4 July 2025 08:48">Friday 4 July 2025</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
